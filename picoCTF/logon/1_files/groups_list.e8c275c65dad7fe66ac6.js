!function(r){function e(e){for(var s,c,n=e[0],l=e[1],a=e[2],h=0,d=[];h<n.length;h++)c=n[h],Object.prototype.hasOwnProperty.call(o,c)&&o[c]&&d.push(o[c][0]),o[c]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(r[s]=l[s]);for(u&&u(e);d.length;)d.shift()();return i.push.apply(i,a||[]),t()}function t(){for(var r,e=0;e<i.length;e++){for(var t=i[e],s=!0,n=1;n<t.length;n++){var l=t[n];0!==o[l]&&(s=!1)}s&&(i.splice(e--,1),r=c(c.s=t[0]))}return r}var s={},o={"web/groups_list":0},i=[];function c(e){if(s[e])return s[e].exports;var t=s[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,c),t.l=!0,t.exports}c.e=function(){return Promise.resolve()},c.m=r,c.c=s,c.d=function(r,e,t){c.o(r,e)||Object.defineProperty(r,e,{enumerable:!0,get:t})},c.r=function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},c.t=function(r,e){if(1&e&&(r=c(r)),8&e)return r;if(4&e&&"object"==typeof r&&r&&r.__esModule)return r;var t=Object.create(null);if(c.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:r}),2&e&&"string"!=typeof r)for(var s in r)c.d(t,s,function(e){return r[e]}.bind(null,s));return t},c.n=function(r){var e=r&&r.__esModule?function(){return r.default}:function(){return r};return c.d(e,"a",e),e},c.o=function(r,e){return Object.prototype.hasOwnProperty.call(r,e)},c.p="/js/cmodules/";var n=window.webpackJsonp=window.webpackJsonp||[],l=n.push.bind(n);n.push=e,n=n.slice();for(var a=0;a<n.length;a++)e(n[a]);var u=l;i.push([202,"common","vendors"]),t()}({202:function(r,e,t){r.exports=t("wbdc")},CQka:function(r,e,t){"use strict";t.r(e),t.d(e,"initGroupLinksTracking",(function(){return c})),t.d(e,"trackGroupLink",(function(){return n})),t.d(e,"getGroupsTrackCodeAttr",(function(){return l}));t("rGqo"),t("Btvt");var s=t("Egk5"),o=t("zxIV"),i=t("v+DW");function c(){setTimeout((function(){var r=Object(o.domQuery)("a[data-group-track-type='link']",ge("page_body"));Object.keys(r).forEach(e=>{var t=r[e];Object(s.addEvent)(t,"click",n),cur.destroy.push(s.removeEvent.pbind(t,"click"))})}),3e3)}function n(r){var e=r.target;if(!e)return!0;if(Object(i.linkLocked)(e))return!0;var t=Object(o.domData)(e,"group-track-code"),s=Object(o.domData)(e,"group-track-type");if(!t||!s)return!0;var c={act:"track",group_id:-cur.oid,track_code:t,type:s};return ajax.post("al_groups.php",c,{onDone:function(){Object(i.unlockLink)(e)}}),!0}function l(r){return Object(o.domData)(r,"trackcode")}},wbdc:function(r,e,t){"use strict";t.r(e);t("HEwt"),t("a1Th"),t("rGqo"),t("rE2o"),t("ioFf"),t("Vd3H"),t("OG14"),t("Oyvg"),t("pIFo"),t("VRzm"),t("Btvt"),t("CX2u");var s=t("v+DW"),o=t("7jxN"),i=t("EasH"),c=t("4+be"),n=t("XzvV"),l=t("3oLO"),a=t("zxIV");class u{static enter(r,e){var t={act:"enter",gid:r,hash:e,context:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",trackcode:arguments.length>3&&void 0!==arguments[3]?arguments[3]:""};return new Promise((r,e)=>{l.ajax.post("al_groups.php",t,{onDone(e){r(e)},onFail(){e()}})})}static inlineProgress(r){r.backhtml||(r.backhtml=r.innerHTML);return[()=>{var e=Object(a.getSize)(r).w;r.innerHTML='<span class="progress_inline"></span>',setStyle(Object(a.domFC)(r),{width:e})},()=>{r.innerHTML=r.backhtml}]}}var h=t("CQka");function d(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(r)))return;var t=[],s=!0,o=!1,i=void 0;try{for(var c,n=r[Symbol.iterator]();!(s=(c=n.next()).done)&&(t.push(c.value),!e||t.length!==e);s=!0);}catch(r){o=!0,i=r}finally{try{s||null==n.return||n.return()}finally{if(o)throw i}}return t}(r,e)||function(r,e){if(!r)return;if("string"==typeof r)return p(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);"Object"===t&&r.constructor&&(t=r.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return p(r,e)}(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,s=new Array(e);t<e;t++)s[t]=r[t];return s}var g={rand:function(){return Math.floor(1e4*Math.random())},toggleFave:function(r,e,t,o){var i=parseInt(r.getAttribute("data-value"))?1:0;ajax.post("fave.php",{act:i?"a_delete_group":"a_add_group",gid:e,hash:t},{onDone:t=>{val(r,t),r.setAttribute("data-value",1-i),this.updateGroupField(e,12,1-i)},showProgress:s.lockActionsMenuItem.pbind(r),hideProgress:s.unlockActionsMenuItem.pbind(r)}),cancelEvent(o)},toggleSubscription:function(r,e,t,o){var i=parseInt(r.getAttribute("data-value"))?1:0;ajax.post("al_wall.php",{act:"a_toggle_posts_subscription",subscribe:i?0:1,oid:-e,hash:t},{onDone:t=>{val(r,t),r.setAttribute("data-value",1-i),this.updateGroupField(e,13,1-i)},showProgress:s.lockActionsMenuItem.pbind(r),hideProgress:s.unlockActionsMenuItem.pbind(r)}),cancelEvent(o)},subscribe:function(r,e,t,o){var n=hasClass(r,"flat_button");if(!(n&&Object(s.isButtonLocked)(r)||Object(s.actionsMenuItemLocked)(r))){var l=n?hasClass(r,"secondary"):!cur.scrollList.deleted[e];!function o(a){ajax.post("al_groups.php",{act:l?"list_leave":"list_enter",gid:e,hash:t,confirm:a},{showProgress:(n?s.lockButton:s.lockActionsMenuItem).pbind(r),hideProgress:(n?s.unlockButton:s.unlockActionsMenuItem).pbind(r),onDone:function(t,s,a){if(s){var u=Object(i.showFastBox)(Object(c.getLang)("global_warning"),s,Object(c.getLang)("group_leave_group"),(function(){u.hide(),o(1)}),Object(c.getLang)("global_cancel"));return!0}if(val(r,t),cur.scrollList.deleted[e]=l,n)toggleClass(r,"secondary",!l);else{var h=domClosest("_gl_row",r);toggleClass(h,"deleted",l),a&&addClass(h,"closed")}},onFail:function(r){setTimeout(Object(i.showFastBox)(Object(c.getLang)("global_error"),r).hide,3e3)}})}()}},updateGroupField:function(r,e,t){cur.scrollList&&cur.scrollList.lists&&each(cur.scrollList.lists,(function(){if(this&&this.length)for(var s=0,o=this.length;s<o;++s)if(this[s][2]==r){this[s][e]=t;break}}))},subscribeFromGroupsRecommendations(r,e,t){if(Object(s.linkLocked)(r))return!0;var i=Object(a.domPN)(r),c=d(u.inlineProgress(i),2),n=c[0],l=c[1];return Object(s.lockLink)(r),n(),u.enter(e,t,"",Object(h.getGroupsTrackCodeAttr)(r)).then(()=>{var e=Object(a.domPN)(Object(a.domPN)(i)),t=Object(a.domPN)(e),s=Object(a.geByClass1)("unshown",t);s&&Object(a.domInsertBefore)(s,r),Object(o.fadeOut)(e,500,()=>{Object(a.re)(e),s||Object(a.geByClass1)("right_list_row",t)?Object(o.fadeIn)(s,200,()=>Object(a.removeClass)(s,"unshown")):Object(o.slideUp)("groups_recommendations",100)})}).finally(()=>{Object(s.unlockLink)(r),l()}),!0},enter:function(r,e,t,o,n){if(cur.invSwitching)return setTimeout(()=>this.enter(r,e,t,o,n),100),!1;var l,h,p=cur.scrollList.tab;if("button"!=r.tagName.toLowerCase()){var g=d(u.inlineProgress(r),2);l=g[0],h=g[1]}else l=s.lockButton.pbind(r),h=s.unlockButton.pbind(r);var f=this.rand(),v=this.rand();cur.scrollList[f]=v,cur.invSwitching=!0,ajax.post("/al_groups.php",{act:"enter",gid:e,hash:t,context:"2"+(o?"_"+o:"")},{onDone:(r,t)=>{if(cur.invSwitching=!1,cur.scrollList&&cur.scrollList[f]==v){var s=cur.scrollList.lists[p],i=n?5:1;if("unsure"==o?i=n?5:3:"decline"==o?i=n?-3:-1:"undecided"==o&&(i=4),s&&"loading"!=s&&"update"!=s)for(var c=0,l=s.length;c<l;++c)s[c][2]==e&&(s[c][1]=i);else cur.scrollList.processed[p][e]=i;if(r&&cur.scrollList.lists.groups){var u=cur.scrollList.lists.groups;if("join"!=o&&"unsure"!=o&&o){if("undecided"==o)for(var h in u)u[h][2]==r[2]&&(u.splice(h,1),cur.scrollList.counts.groups--)}else u.unshift(r),cur.scrollList.counts.groups++;this.updateIndexer(u),this.showMore(!0)}TopNotifier&&!TopNotifier.shown()&&TopNotifier.invalidate();var d=ge("gl_inv"+e),g=d&&Object(a.geByClass1)("group_row_status",d);d&&(g.basehtml=g.innerHTML,g.innerHTML=t)}},onFail:function(r){if(r)return setTimeout(Object(i.showFastBox)(Object(c.getLang)("global_error"),r).hide,3e3),!0},showProgress:l,hideProgress:h})},leave:function(r,e,t,o){if(cur.invSwitching)return setTimeout(()=>this.leave(r,e,t,o),100),!1;if(!r.firstChild||"progress_inline"!=r.firstChild.className){var i,c,n=this.rand(),l=this.rand(),u=cur.scrollList.tab;cur.scrollList[n]=l,"button"!=r.tagName.toLowerCase()?(r.backhtml||(r.backhtml=r.innerHTML),i=function(){var e=getSize(r)[0];r.innerHTML='<span class="progress_inline"></span>',setStyle(domFC(r),{width:e})},c=function(){r.innerHTML=r.backhtml}):(i=s.lockButton.pbind(r),c=s.unlockButton.pbind(r)),cur.invSwitching=!0,ajax.post("/al_groups.php",{act:"leave",gid:e,hash:t,context:2},{onDone:function(r,t){if(cur.invSwitching=!1,cur.scrollList&&cur.scrollList[n]==l){var s=cur.scrollList.lists[u];if(s&&"loading"!=s&&"update"!=s)for(var o=0,i=s.length;o<i;++o)s[o][2]==e&&(s[o][1]=-1);else cur.scrollList.processed[u][e]=-1;TopNotifier&&!TopNotifier.shown()&&TopNotifier.invalidate();var c=ge("gl_inv"+e),h=c&&Object(a.geByClass1)("group_row_status",c);c&&(h.basehtml=h.innerHTML,h.innerHTML=t)}},showProgress:i,hideProgress:c})}},spam:function(r,e,t){if(!domFC(r)||"progress_inline"!=domFC(r)){var s=this.rand(),o=this.rand(),i=cur.scrollList.tab;cur.scrollList[s]=o,ajax.post("/al_groups.php",{act:"spam",gid:e,hash:t,context:1},{onDone:function(r){if(cur.scrollList&&cur.scrollList[s]==o){var t=cur.scrollList.lists[i];if(t&&"loading"!=t&&"update"!=t)for(var c=0,n=t.length;c<n;++c)t[c][2]==e&&(t[c][1]=-2);else cur.scrollList.processed[i][e]=-2;var l=ge("gl_inv"+e),u=l&&Object(a.geByClass1)("group_row_status",l);l&&(u.innerHTML=r)}},showProgress:function(){r.oldhtml=r.innerHTML;var e=getSize(r)[0];r.innerHTML='<span class="progress_inline"></span>',setStyle(domFC(r),{width:e})},hideProgress:function(){r.innerHTML=r.oldhtml}})}},cancel:function(r,e,t){if(!domFC(r)||"progress_inline"!=domFC(r).className){var s=this.rand(),o=this.rand(),i=cur.scrollList.tab;cur.scrollList[s]=o,ajax.post("/al_groups.php",{act:"cancel",gid:e,hash:t,context:1},{onDone:()=>{if(cur.scrollList&&cur.scrollList[s]==o){var r=cur.scrollList.lists[i];if(r&&"loading"!=r&&"update"!=r){for(var t in r)r[t][2]==e&&(r.splice(t,1),cur.scrollList.counts.groups--);this.updateIndexer(r),this.showMore(!0)}else cur.scrollList.processed[i][e]=0;var c=ge("gl_inv"+e),n=c&&Object(a.geByClass1)("group_row_status",c);c&&n&&n.basehtml&&(n.innerHTML=n.basehtml)}},showProgress:function(){r.oldhtml=r.innerHTML;var e=getSize(r)[0];r.innerHTML='<span class="progress_inline"></span>',setStyle(domFC(r),{width:e})},hideProgress:function(){r.innerHTML=r.oldhtml}})}},updateIndexer:function(r){cur.scrollList.cache.groups={all:[]};var e=cur.scrollList.cache.groups;for(var t in r)r.hasOwnProperty(t)&&e.all.push(t);cur.scrollList.index.groups=new vkIndexer(e.all,(function(e){return r[e][0]}))},rejectAll:function(r,e){Object(i.showFastBox)(Object(c.getLang)("global_warning"),Object(c.getLang)("groups_sure_reject_all"),Object(c.getLang)("groups_reject_all_inv"),(function(r){ajax.post("/al_groups.php",{act:"reject_all",hash:e},{showProgress:s.lockButton.pbind(r),hideProgress:s.unlockButton.pbind(r)})}),Object(c.getLang)("global_cancel"))},scrollCheck:function(){if(!browser.mobile&&cur.scrollList){var r=ge("ui_"+cur.scrollList.tab+"_load_more"),e=ge("ui_search_load_more");if(isVisible(r)||(r=e,isVisible(r))){var t=document.documentElement,s=window.innerHeight||t.clientHeight||bodyNode.clientHeight,o=scrollGetY();(o+s>r.offsetTop||cur.searchOffset&&o+2*s>r.offsetTop)&&this.showMore()}}},initScroll:function(){this.destroyScroll(),this._scrollCheck=()=>this.scrollCheck(),addEvent(window,"scroll",this._scrollCheck),addEvent(window,"resize",this._scrollCheck)},destroyScroll:function(){removeEvent(window,"scroll",this._scrollCheck),removeEvent(window,"resize",this._scrollCheck)},locNav:function(r,e,t){var s=r.tab,o=s||("events"==t.act?"future":"groups");if(delete r.tab,isEmpty(r)&&void 0!==s)return hide("groups_list_tab_"+cur.scrollList.tab),this.updateSummary(cur.scrollList.counts[cur.scrollList.tab]),cur.scrollList.tab=o,cur.scrollList.summary=Object(a.geByClass1)("ui_tab_count",ge("groups_"+o+"_tab")),show("groups_list_tab_"+o),checkPageBlocks(),nav.setLoc(t),window.uiSearch&&uiSearch.reset(cur.scrollList.query,!0),elfocus(cur.scrollList.query),this.updateSummary(cur.scrollList.counts[o]),cur.scrollList.offset=ge("groups_list_"+o).childNodes.length,this.showMore(!0),window.uiTabs&&uiTabs.hideProgress(ge("groups_"+o+"_tab")),!1},init:function(r){extend(cur,{module:"groups_list",_back:{text:Object(c.getLang)("groups_back_to_list"),show:[()=>this.initScroll,elfocus.pbind("groups_list_search")],hide:[()=>this.destroyScroll]},scrollList:{tab:r.tab,url:"al_groups.php",params:{act:"get_list",mid:r.mid},prefix:"groups_list_",query:ge("groups_list_search"),queryCont:gpeByClass("_wrap",ge("groups_list_search")),queryWrap:ge("group_u_search_input_wrap"),summary:Object(a.geByClass1)("ui_tab_count",ge("groups_"+(r.tab||"groups")+"_tab")),searchSummary:ge("groups_search_summary"),invites:ge("groups_invites_wrap"),invitesPreload:ge("groups_invites_preload"),invitesMoreLnk:ge("ui_invites_load_more"),searchWrap:ge("groups_list_search_wrap"),searchCont:ge("groups_list_search_cont"),eventsPopular:ge("events_popular_list"),perpage:20,offset:ge("groups_list_"+r.tab).childNodes.length,lists:{},cache:{},index:{},deleted:{},processed:{groups:{},admin:{},inv:{},future:{},past:{},events_concerts:{}},filtered:{},queries:{},counts:r.counts,genEmpty:r.genEmpty,genRow:r.genRow,genSummary:r.genSummary,genGroupsSummary:r.genGroupsSummary,invShown:r.invShown},filter:r.filter}),setTimeout(elfocus.pbind(cur.scrollList.query),0),cur.nav.push(()=>this.locNav),setTimeout(()=>this.load,0),vk.version?addEvent(window,"load",()=>this.initScroll):this.initScroll(),cur.destroy.push(r=>{r==cur&&this.destroyScroll()}),"search"===nav.objLoc.from&&(cur.searchSeoMode=!0)},updateSummary:function(r,e){val(e?cur.scrollList.searchSummary:cur.scrollList.summary,r?langNumeric(r,"%s",!0):"")},load:function(r,e){var t=e||cur.scrollList.tab;if(!cur.scrollList.lists[t]){var s=this.rand(),o=this.rand();cur.scrollList[s]=o,cur.scrollList.lists[t]="loading",ajax.post(cur.scrollList.url,extend(cur.scrollList.params,{tab:t}),{onDone:e=>{if(cur.scrollList&&cur.scrollList[s]==o){var i="update"==cur.scrollList.lists[t];if(i||"loading"==cur.scrollList.lists[t]){cur.scrollList.cache[t]={all:[]};for(var c=cur.scrollList.processed[t],n=0,l=e.length;n<l;++n){var a=c[e[n][2]];a&&(e[n][1]=a),cur.scrollList.cache[t].all.push(n)}cur.scrollList.indexing||(cur.scrollList.indexing={}),cur.scrollList.indexing[t]=!0,cur.scrollList.lists[t]=e;var u=i?()=>{cur.scrollList&&cur.scrollList[s]==o&&cur.scrollList.tab==t&&this.showMore(r)}:function(){};cur.scrollList.index[t]=new vkIndexer(cur.scrollList.cache[t].all,(function(r){return delete cur.scrollList.indexing[t],cur.scrollList.lists[t][r][0]}),u)}}},local:1})}},getHighlight:function(r){var e=cur.scrollList.index[cur.scrollList.tab],t=e.delimiter,s=e.trimmer;return r+=" "+(Object(c.parseLatin)(r)||""),r=(r=escapeRE(r).replace(/&/g,"&amp;")).replace(s,"").replace(t,"|").replace(/(^\||\|$)/g,""),{re:new RegExp("("+r+")","gi"),val:'<span class="highlight">$1</span>'}},onSearchChange:function(){delete cur.exactSearch,this.showMore(!1)},onSearchEnter:function(){cur.exactSearch=1,this.showMore(!0)},showMore:function(r){var e=Object(n.generateQID)(),t=cur.scrollList.tab,s=cur.scrollList.lists[t];if(!s||"loading"==s||"update"==s)return s||this.load(r,cur.scrollList.tab),void(cur.scrollList.lists[t]="update");if(!cur.scrollList.indexing||!cur.scrollList.indexing[t]){t=cur.scrollList.tab,s=cur.scrollList.cache[t].all;var o=trim(cur.scrollList.query.value),i=cur.searchStr!==o;cur.searchStr=o,0===o.length&&Object(n.removeSearchPositionTracker)("groups"),void 0===cur.scrollList.queries[t]&&(cur.scrollList.queries[t]="");var c=r||o!=cur.scrollList.queries[t];if(c||!1!==r){cur.scrollList.queries[t]=o;var l=!1;if(o){if(void 0===(s=cur.scrollList.cache[t]["_"+o])){var a=cur.scrollList.index[t].search(o),u={};s=[];for(var h=0,d=a.length;h<d;++h)u[a[h]]||(u[a[h]]=!0,s.push(a[h]));s.sort((function(r,e){return r-e})),cur.scrollList.cache[t]["_"+o]=s}l=this.getHighlight(o)}var p=s.length,g=ge(cur.scrollList.prefix+t),f=ge("ui_"+t+"_load_more");if(this.updateSummary(p),o&&c&&i&&Object(n.saveSearchAttemptStats)(n.serviceGroups,0,p,o,e,0,"0","no_model",n.blockNameOwn),!p)return g.innerHTML=cur.scrollList.genEmpty(o),void(o&&this.needSearch(t)?c?(this.serverSearch(g,o,[],e),hide(f)):cur.searchOffset&&this.serverSearchMore(g,o,e):(hide(f),hide(cur.scrollList.searchWrap),show(cur.scrollList.eventsPopular),cur.searchOffset=0));for(var v=c?0:cur.scrollList.offset,_=Math.min(p,v+cur.scrollList.perpage),L=[],b=v;b<_;++b){var m=cur.scrollList.lists[t][s[b]];if(m){var w=m[0];l&&(w=w.replace(l.re,l.val)),L.push(cur.scrollList.genRow(m,w))}}if(o||v&&!c||(hide(cur.scrollList.searchWrap),show(cur.scrollList.eventsPopular),cur.searchOffset=0),c)if(hasClass(cur.scrollList.queryCont,"ui_search_fixed")&&scrollToY(getXY(cur.scrollList.queryWrap)[1]+1,0),g.innerHTML=L.join(""),checkPageBlocks(),cur.searchOffset=!1,s.length<5&&o&&this.needSearch(t)){var y,j=[];for(var S in s)s.hasOwnProperty(S)&&(y=cur.scrollList.lists[t][s[S]],j.push(y[2]));this.serverSearch(g,o,j,e)}else hide(cur.scrollList.searchWrap),show(cur.scrollList.eventsPopular),cur.searchOffset=0;else g.innerHTML+=L.join(""),cur.searchOffset&&this.serverSearchMore(g,o,e);cur.scrollList.offset=_,cur.searchOffset||(_<p?show:hide)(f)}}},showMoreInvites:function(r){if(!cur.loadingInvites){for(var e=cur.scrollList.invites&&Object(a.geByClass1)("groups_list",cur.scrollList.invites),t=cur.scrollList.invitesPreload,s=cur.scrollList.invitesMoreLnk;domFC(t);)e.appendChild(domFC(t)),cur.scrollList.invShown++;toggle(s,cur.scrollList.counts.invite>cur.scrollList.invShown),isVisible(s)&&ajax.post("/al_groups.php",{act:"more_invites",offset:cur.scrollList.invShown},{onDone:function(r,e){t.innerHTML=r,e&&(cur.scrollList.counts.invite-=e)},showProgress:function(){cur.loadingInvites=!0},hideProgress:function(){cur.loadingInvites=!1}})}},serverSearchMore:function(r,e,t){if(!cur.searchLoadingMore){cur.searchLoadingMore=1;var o=ge("ui_search_load_more");ajax.post("/al_groups.php",{act:"server_search",q:e,query_id:t,offset:cur.searchOffset,exact:cur.exactSearch,exclude:cur.searchExclude.join(",")},{onDone:function(r,e,t,s){cur.searchLoadingMore=0,r?(cur.searchOffset=t,cur.scrollList.searchCont.appendChild(cf(e))):cur.searchOffset=0,(!e||t>=r?hide:show)("ui_search_load_more")},onFail:function(){cur.searchLoadingMore=0},showProgress:s.lockButton.pbind(o),hideProgress:s.unlockButton.pbind(o)})}},extendedSearch:function(r){clearTimeout(cur.searchTimeout),cur.searchTimeout=setTimeout((function(){var e=Object(a.geByClass1)("groups_section_search");window.searcher&&e?hasClass(e,"ui_rmenu_item_sel")?window.searcher.onEnter():(uiRightMenu.switchMenu(e),uiRightMenu.showProgress(e),nav.go(e.href+"&c[like_hints]=1&c[q]="+r)):nav.go("/groups?act=catalog&c[q]="+r)}),500)},onExtendedSearchChange:function(r,e){val("c[like_hints]",1),this.extendedSearch(r)},onExtendedSearchEnter:function(r,e,t){val("c[like_hints]",""),this.extendedSearch(e)},needSearch:function(r){return"groups"==r||"future"==r||"past"==r},serverSearch:function(r,e,t,s){if(!this.needSearch(cur.scrollList.tab))return!1;clearTimeout(cur.searchTimeout),cur.searchTimeout=setTimeout(()=>{if(cur.searchStr==e){cur.searchExclude=t||[];var r=+new Date;ajax.post("/al_groups.php",{act:"server_search",q:e,query_id:s,exact:cur.exactSearch,exclude:cur.searchExclude.join(",")},{onDone:(t,o,i,c,l)=>{cur.searchStr==e&&(e&&Object(n.saveSearchAttemptStats)(n.serviceGroups,r,t,e,s,c,l.query_duration,l.model_name,n.blockNameSearch),t?(cur.scrollList.searchCont.innerHTML=o,show(cur.scrollList.searchWrap),hide(cur.scrollList.eventsPopular),(i<t||!o)&&show("ui_search_load_more")):(cur.scrollList.searchCont.innerHTML="",hide(cur.scrollList.searchWrap),show(cur.scrollList.eventsPopular)),checkPageBlocks(),this.updateSummary(t,!0),cur.searchOffset=i)},showProgress:uiSearch.showProgress.pbind(cur.scrollList.query),hideProgress:uiSearch.hideProgress.pbind(cur.scrollList.query)})}},300)},showMapBox:function(r,e,t){window.showZeroZoneBox&&window.showZeroZoneBox("places",()=>{this.showMapBox(r,e,t)})||showTabbedBox("/al_places.php",{act:"show_photo_place",place_id:r},{stat:["places.css","map.css","maps.js","ui_controls.css","ui_controls.js"]})},feedbanGroup:function(r,e,t){var s=-e;ajax.post("/al_fans.php",{act:"feedtgl",oid:s,hash:t},{onDone:(t,s)=>{r.innerHTML=s,this.updateGroupField(e,9,t)},showProgress:function(){r.innerHTML='<span class="progress_inline"></span>'}})},initPositionStat(){document.getElementById("groups_list_groups").addEventListener("click",(function(r){var e=r.target;if("A"===e.tagName&&(e.classList.contains("group_row_title")||e.classList.contains("group_row_img"))){var t=e.closest(".group_list_row").dataset,s=t.groupId,o=t.pos,i=t.trackPosHash;g.addClickStat(s,o,i)}}))},addClickStat(r,e,t){t&&r&&e&&!cur.searchStr&&Object(n.statlogsValueEvent)("groups_hints_item_click",t,r,e)}};window.GroupsList=g;try{window.stManager.done(window.jsc("web/groups_list.js"))}catch(r){}}});