!function(e){function t(t){for(var o,s,l=t[0],a=t[1],c=t[2],h=0,u=[];h<l.length;h++)s=l[h],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&u.push(i[s][0]),i[s]=0;for(o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o]);for(d&&d(t);u.length;)u.shift()();return n.push.apply(n,c||[]),r()}function r(){for(var e,t=0;t<n.length;t++){for(var r=n[t],o=!0,l=1;l<r.length;l++){var a=r[l];0!==i[a]&&(o=!1)}o&&(n.splice(t--,1),e=s(s.s=r[0]))}return e}var o={},i={"web/short_video_feed_block":0},n=[];function s(t){if(o[t])return o[t].exports;var r=o[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.e=function(){return Promise.resolve()},s.m=e,s.c=o,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(r,o,function(t){return e[t]}.bind(null,o));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/js/cmodules/";var l=window.webpackJsonp=window.webpackJsonp||[],a=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var d=a;n.push([290,"common"]),r()}({290:function(e,t,r){e.exports=r("b2Kt")},b2Kt:function(e,t,r){"use strict";r.r(t);var o=r("zxIV"),i=r("Egk5"),n=r("jE6c"),s=function(e,t,r,o){return new(r||(r=Promise))((function(i,n){function s(e){try{a(o.next(e))}catch(e){n(e)}}function l(e){try{a(o.throw(e))}catch(e){n(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,l)}a((o=o.apply(e,t||[])).next())}))},l=function(e,t){var r,o,i,n,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return n={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function l(n){return function(l){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(i=2&n[0]?o.return:n[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,n[1])).done)return i;switch(o=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,o=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==n[0]&&2!==n[0])){s=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){s.label=n[1];break}if(6===n[0]&&s.label<i[1]){s.label=i[1],i=n;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(n);break}i[2]&&s.ops.pop(),s.trys.pop();continue}n=t.call(e,s)}catch(e){n=[6,e],o=0}finally{r=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,l])}}},a=function(){function e(){this.scrollPos=0,this.clipWidth=100,this.clipsLoading=!1,this.videosNextFrom=null,this.loadMoreCount=0,this.endpoint="clips.php?act=show_more_top",this.isWidget=!1}return e.prototype.init=function(){var e,t,r=this;if(this.wrapper=Object(o.ge)("short_video_feed_block_wrapper"),this.wrapper){var i=this.wrapper.parentElement;this.isWidget=!!i&&i.classList.contains("ShortVideoFeedBlock--widget"),this.container=Object(o.ge)("short_video_feed_block_container"),this.itemsWrapper=Object(o.ge)("short_video_feed_block_items"),this.itemsStub=Object(o.ge)("short_video_feed_block_items_stub"),this.leftArrowEl=Object(o.geByClass1)("ShortVideoFeedBlock__arrow--left",this.container),this.rightArrowEl=Object(o.geByClass1)("ShortVideoFeedBlock__arrow--right",this.container),this.videosNextFrom=this.wrapper.getAttribute("data-next-from"),this.isWidget?(this.endpoint="portlet_clips.php?act=show_more",this._handleTouchMove=function(){r.itemsWrapper.scrollWidth-r.itemsWrapper.scrollLeft<=1e3&&r.loadMore()},this.wrapper.addEventListener("touchmove",this._handleTouchMove,{passive:!0})):(this._leftArrowElClickHandler=function(){r.feedPaging("prev")},this._rightArrowElClickHandler=function(){r.feedPaging("next")},this._feedMouseWheel=function(e){r.feedMouseWheel(e)},this._handleMouseEnter=function(){r.wrapper.addEventListener("wheel",r._feedMouseWheel)},this._handleMouseLeave=function(){r.wrapper.removeEventListener("wheel",r._feedMouseWheel)},this.leftArrowEl.addEventListener("click",this._leftArrowElClickHandler),this.rightArrowEl.addEventListener("click",this._rightArrowElClickHandler),this.wrapper.addEventListener("mouseenter",this._handleMouseEnter),this.wrapper.addEventListener("mouseleave",this._handleMouseLeave),this.updateArrows()),null===(t=null===(e=window.cur)||void 0===e?void 0:e.destroy)||void 0===t||t.push((function(){r.isWidget?r.wrapper.removeEventListener("touchmove",r._handleTouchMove):(r.leftArrowEl.removeEventListener("click",r._leftArrowElClickHandler),r.rightArrowEl.removeEventListener("click",r._rightArrowElClickHandler),r.wrapper.removeEventListener("wheel",r._feedMouseWheel),r.wrapper.removeEventListener("mouseenter",r._handleMouseEnter),r.wrapper.removeEventListener("mouseleave",r._handleMouseLeave))}))}},e.prototype.updateArrows=function(){var e=this.wrapper.offsetWidth,t=this.itemsWrapper.scrollWidth-e;0===this.scrollPos?Object(o.addClass)(this.leftArrowEl,"ShortVideoFeedBlock__arrow--disabled"):Object(o.removeClass)(this.leftArrowEl,"ShortVideoFeedBlock__arrow--disabled"),this.scrollPos===t||t<=0?Object(o.addClass)(this.rightArrowEl,"ShortVideoFeedBlock__arrow--disabled"):Object(o.removeClass)(this.rightArrowEl,"ShortVideoFeedBlock__arrow--disabled")},e.prototype.feedPaging=function(e,t){void 0===t&&(t=!1);var r=this.scrollPos,i=Object(o.getSize)(this.itemsWrapper)[0],s=i-this.clipWidth;Object(n.isNumeric)(e)?r+=e:"next"===e?r+=s:r-=s,Object(o.toggleClass)(this.itemsWrapper,"ShortVideoFeedBlock__itemsWrapper--noAnimation",t),this.scrollPos=Math.max(0,Math.min(r,this.itemsWrapper.scrollWidth-i)),Object(o.setStyle)(this.itemsWrapper,"transform","translateX(-"+this.scrollPos+"px)"),this.updateArrows(),this.itemsWrapper.scrollWidth-this.scrollPos<=1e3&&this.loadMore()},e.prototype.feedMouseWheel=function(e){Object(i.cancelEvent)(e);var t=Math.abs(e.deltaY)>Math.abs(e.deltaX)?e.deltaY:e.deltaX;this.feedPaging(t,!0)},e.prototype.loadMore=function(){var e=this;this.loadMoreCount>=2||this.videosNextFrom&&!this.clipsLoading&&(this.clipsLoading=!0,this._fetchClips().then((function(t){var r=t.html,o=t.nextFrom;if(e.clipsLoading=!1,e.videosNextFrom=o||"",e.itemsWrapper.insertAdjacentHTML("beforeend",r||""),e.loadMoreCount++,e.isWidget||e.updateArrows(),e.isWidget&&2==e.loadMoreCount){var i=e.itemsStub.cloneNode(!0);i.classList.remove("ShortVideoFeedBlock__itemsStub--hidden"),e.itemsWrapper.insertAdjacentHTML("beforeend",i.outerHTML)}})).catch((function(){})))},e.prototype._fetchClips=function(){if(!this.videosNextFrom)return Promise.reject();var e=new FormData;return e.append("next_from",this.videosNextFrom),e.append("al","1"),fetch(this.endpoint,{method:"POST",body:e}).then(c).then((function(e){return e.text()})).then((function(e){try{e=e.replace(/^<!--/,"");var t=JSON.parse(e);if(t&&t.payload&&t.payload[1]){var r=t.payload[1],o=r[0],i=r[1];return Promise.resolve({html:o,nextFrom:i})}return Promise.resolve({})}catch(e){return Promise.reject(e)}})).catch((function(e){return Promise.reject(e)}))},e}();function c(e){return s(this,void 0,void 0,(function(){var t,r,o;return l(this,(function(i){switch(i.label){case 0:return t=Response.bind,o=(r=new TextDecoder("windows-1251")).decode,[4,e.arrayBuffer()];case 1:return[2,new(t.apply(Response,[void 0,o.apply(r,[i.sent()])]))]}}))}))}window.ShortVideoFeedBlock=new a;try{window.stManager.done(window.jsc("web/short_video_feed_block.js"))}catch(e){}}});